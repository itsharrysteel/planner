<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 North Star</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>

    <nav class="sidebar">
        <div class="brand">‚ú® 2026 North Star</div>
        
        <a href="#dashboard" class="nav-link active">Dashboard</a>
        <a href="#daily" class="nav-link">Daily Planning</a>
        <a href="#monthly" class="nav-link">Monthly Goals</a>
        <a href="#yearly" class="nav-link">Yearly Goals</a>
        <a href="#habits" class="nav-link">Habit Tracker</a>
        <a href="#budget" class="nav-link">Budget Tracker</a>
        <a href="#vision" class="nav-link">Vision Board</a>
    </nav>

    <main class="main-content">
        
        <section id="dashboard" class="page-section active">
            <h1>Dashboard</h1>
            <div class="dashboard-grid">
                <div class="stat-card" style="background: var(--primary); color: white;">
                    <h2 id="dash-greeting">Hello!</h2>
                    <p id="dash-date" style="opacity: 0.8; margin-top: 5px;">Loading date...</p>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Outstanding Tasks</span>
                    <div class="stat-number" id="dash-task-count">0</div>
                    <div style="font-size: 0.8rem; color: #888; margin-top: 5px;">
                        Let's get things done.
                    </div>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Paybacks Remaining</span>
                    <div class="stat-number" style="color: #e74c3c;">¬£<span id="dash-debt-left">0.00</span></div>
                    <p style="font-size: 0.8rem; color: #888;">Keep chipping away at it!</p>
                </div>
                <div class="stat-card">
                    <h3>üìù Up Next</h3>
                    <ul class="dashboard-list" id="dash-todo-list"><li>Loading...</li></ul>
                    <a href="#daily" class="nav-link" style="font-size: 0.8rem; margin-top: 10px; display:inline-block;">View List &rarr;</a>
                </div>
                <div class="scratchpad-container">
                    <h3>üí° Quick Notes / Scratchpad</h3>
                    <textarea id="dash-scratchpad" class="scratchpad-area" placeholder="Type your ideas here... they will save automatically."></textarea>
                </div>
                <div class="stat-card" style="min-height: 300px;">
                    <h3>üìÖ Calendar</h3>
                    <div style="background:#eee; height:100%; border-radius:8px; display:flex; align-items:center; justify-content:center; color:#aaa;">
                        Google Calendar Placeholder
                    </div>
                </div>
            </div>
        </section>

        <section id="daily" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Daily Planning</h1>
            </div>
            
            <div id="view-personal" class="daily-view" style="display:block;">
                <div class="personal-actions" style="display:flex; gap:10px; margin-bottom:15px;">
                    <button onclick="openAddTaskModal()" style="background:var(--accent); color:white; border:none; padding:0.6rem 1.2rem; border-radius:4px; cursor:pointer; font-weight:bold; flex:1;">+ Add Task</button>
                    <button onclick="toggleSelectionMode()" id="btn-select-mode" style="color:var(--primary); background:white; border:1px solid #ccc; padding:0.6rem 1.2rem; border-radius:4px; cursor:pointer;">Select</button>
                    <button onclick="addPersonalSection()" style="color:#666; background:white; border:1px dashed #ccc; padding:0.6rem 10px; border-radius:4px; cursor:pointer;">+ Section</button>
                </div>
                <div class="card personal-list" id="personal-task-list" style="margin-top:10px; padding:0;">
                    <p style="padding:1rem;">Loading tasks...</p>
                </div>
            </div>
        </section>

        <section id="monthly" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Monthly Goals</h1>
                <button onclick="openGoalModal('Monthly')" style="background:var(--accent); color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">+ New Goal</button>
            </div>
            <div id="monthly-goals-container" class="goals-grid"></div>
        </section>

        <section id="yearly" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Yearly Goals</h1>
                <button onclick="openGoalModal('Yearly')" style="background:var(--accent); color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">+ New Goal</button>
            </div>
            <div id="yearly-goals-container" class="goals-grid"></div>
        </section>

        <section id="habits" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Habit Tracker</h1>
                <button onclick="openGoalModal('Habit')" style="background:var(--accent); color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">+ New Habit</button>
            </div>
            <div id="habit-goals-container" class="goals-grid"></div>
        </section>

        <section id="budget" class="page-section">
            <h1>Budget Tracker</h1>
            
            <div class="budget-section">
                <div class="budget-header">
                    <h3>üè¶ Barclays Bills</h3>
                    <div class="budget-total">Total: ¬£<span id="total-barclays">0.00</span></div>
                </div>
                <table class="budget-table">
                    <thead>
                        <tr>
                            <th style="width:30px"></th> <th style="width:30px">Paid</th>
                            <th>Bill Name</th>
                            <th>Amount</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="list-barclays"></tbody>
                </table>
                <div style="margin-top:10px;">
                    <button onclick="openBudgetModal('Barclays', 'bill')" style="color:var(--accent); background:none; border:none; cursor:pointer; margin-right:15px;">+ Add Bill</button>
                    <button onclick="openBudgetModal('Barclays', 'header')" style="color:#888; background:none; border:none; cursor:pointer; font-size:0.9rem;">+ Add Section Header</button>
                </div>
            </div>

            <div class="budget-section">
                <div class="budget-header">
                    <h3>üí≥ Monzo Bills</h3>
                    <div class="budget-total">Total: ¬£<span id="total-monzo">0.00</span></div>
                </div>
                <table class="budget-table">
                    <thead>
                        <tr>
                            <th style="width:30px"></th> <th style="width:30px">Paid</th>
                            <th>Bill Name</th>
                            <th>Amount</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="list-monzo"></tbody>
                </table>
                <div style="margin-top:10px;">
                    <button onclick="openBudgetModal('Monzo', 'bill')" style="color:var(--accent); background:none; border:none; cursor:pointer; margin-right:15px;">+ Add Bill</button>
                    <button onclick="openBudgetModal('Monzo', 'header')" style="color:#888; background:none; border:none; cursor:pointer; font-size:0.9rem;">+ Add Section Header</button>
                </div>
            </div>

            <div class="budget-section">
                <div class="budget-header">
                    <h3>üìâ Paybacks (Finance)</h3>
                    <div class="budget-total">Left: ¬£<span id="total-payback">0.00</span></div>
                </div>
                <table class="budget-table">
                    <thead>
                        <tr>
                            <th style="width:30px"></th> <th style="width:30px">Paid</th>
                            <th>Item</th>
                            <th>Monthly</th>
                            <th>Total Left</th>
                            <th>Months Left</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="list-payback"></tbody>
                </table>
                <div style="margin-top:10px;">
                    <button onclick="openBudgetModal('Payback', 'bill')" style="color:var(--accent); background:none; border:none; cursor:pointer; margin-right:15px;">+ Add Bill</button>
                    <button onclick="openBudgetModal('Payback', 'header')" style="color:#888; background:none; border:none; cursor:pointer; font-size:0.9rem;">+ Add Section Header</button>
                </div>
            </div>
        </section>

        <section id="vision" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1>Vision Board</h1>
                <button onclick="openVisionModal()" style="background:var(--accent); color:white; border:none; padding:0.5rem 1rem; border-radius:4px; cursor:pointer;">+ Add Image</button>
            </div>
            <div class="vision-filter"></div>
            <div id="vision-grid" class="vision-grid"></div>
        </section>

    </main>

    <div id="task-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
        <div style="background:white; width:500px; max-width:95%; margin:50px auto; padding:2rem; border-radius:8px; max-height:90vh; overflow-y:auto;">
            <h2 id="task-modal-title">Edit Task</h2>
            <input type="hidden" id="task-id">
            <input type="hidden" id="task-type" value="Personal">
            <input type="hidden" id="task-status" value="Todo">

            <label style="display:block; margin-top:10px; font-weight:bold; font-size:0.9rem;">Task Name</label>
            <div style="position:relative; margin-top:5px;">
                <input type="text" id="task-title" placeholder="What needs doing?" 
                       style="width:100%; padding:0.5rem; padding-right: 140px;" 
                       onkeypress="handleTaskTitleKey(event)"
                       oninput="checkDateIntent(this.value)">
                
                <div id="date-suggestion" class="date-suggestion-chip" onclick="applySuggestedDate()"></div>
            </div>

            <label style="display:block; margin-top:15px; font-weight:bold; font-size:0.9rem;">Description / Notes</label>
            <textarea id="task-desc" rows="4" style="width:100%; padding:0.5rem; margin-top:5px; border:1px solid #ccc; border-radius:4px;" placeholder="Add details..."></textarea>

            <div style="margin-top:15px;">
                <label style="font-size:0.8rem;">Due Date</label>
                <div id="modal-due-btn" class="date-input-fake" onclick="openDateMenu(event, 'modal-due')">
                    <span id="modal-due-text">Add Date</span>
                    <span style="color:#888;">üìÖ</span>
                </div>
                <input type="hidden" id="task-due">
            </div>

            <div style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
                <button type="button" onclick="deleteTask()" class="delete-btn">Delete</button>
                <div>
                    <button onclick="document.getElementById('task-modal').style.display='none'" style="margin-right:10px; padding:0.5rem 1rem; cursor:pointer;">Cancel</button>
                    <button onclick="saveTask()" style="background:var(--accent); color:white; padding:0.5rem 1rem; border:none; cursor:pointer; border-radius:4px;">Save Task</button>
                </div>
            </div>
        </div>
    </div>

    <div id="goal-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div style="background:white; width:500px; max-width:90%; margin:50px auto; padding:2rem; border-radius:8px; max-height: 90vh; overflow-y: auto;">
            <h2 id="goal-modal-title">New Goal</h2>
            <input type="hidden" id="goal-id"> <input type="hidden" id="goal-type">
            <label style="display:block; margin-top:10px; font-size:0.9rem;">Goal Title</label>
            <input type="text" id="goal-title-input" placeholder="e.g. Go to Gym" style="width:100%; padding:0.5rem; margin-top:5px;">
            <label style="display:block; margin-top:10px; font-size:0.9rem;">Image URL (Optional)</label>
            <input type="text" id="goal-image-input" placeholder="https://..." style="width:100%; padding:0.5rem; margin-top:5px;">
            <div style="display:flex; gap:10px; margin-top:10px;">
                <div style="flex:1;">
                    <label style="font-size:0.9rem;">Current Progress</label>
                    <input type="number" id="goal-current-input" value="0" style="width:100%; padding:0.5rem;">
                </div>
                <div style="flex:1;">
                    <label style="font-size:0.9rem;">Target Goal</label>
                    <input type="number" id="goal-target-input" value="1" style="width:100%; padding:0.5rem;">
                </div>
            </div>
            <label style="display:block; margin-top:15px; font-size:0.9rem;">My Notes (How is it going?)</label>
            <textarea id="goal-notes-input" class="notes-area" placeholder="Journal your progress here..."></textarea>
            <div style="margin-top:20px; text-align:right;">
                <button onclick="document.getElementById('goal-modal').style.display='none'" style="margin-right:10px; padding:0.5rem 1rem; cursor:pointer;">Cancel</button>
                <button onclick="saveGoal()" style="background:var(--accent); color:white; padding:0.5rem 1rem; border:none; cursor:pointer;">Save Goal</button>
            </div>
        </div>
    </div>

    <div id="budget-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div style="background:white; width:400px; margin:100px auto; padding:2rem; border-radius:8px;">
            <h2 id="budget-modal-title">Add Item</h2>
            
            <input type="hidden" id="budget-id">
            <input type="hidden" id="budget-category">
            <input type="hidden" id="budget-type">
            
            <input type="text" id="budget-name" placeholder="Name (e.g. Council Tax)" style="width:100%; padding:0.5rem; margin:1rem 0;">
            
            <div id="cost-fields">
                <input type="number" id="budget-monthly" placeholder="Monthly Cost (¬£)" style="width:100%; padding:0.5rem; margin-bottom:1rem;">
                
                <div id="payback-fields" style="display:none;">
                    <input type="number" id="budget-total" placeholder="Total Debt Amount (¬£)" style="width:100%; padding:0.5rem; margin-bottom:1rem;">
                    <label style="display:block; font-size:0.8rem; margin-bottom:5px;">Final Payment Date (Optional)</label>
                    <input type="date" id="budget-date" style="width:100%; padding:0.5rem; margin-bottom:1rem;">
                </div>
            </div>

            <button onclick="saveBudgetItem()" style="background:var(--accent); color:white; padding:0.5rem 1rem; border:none; cursor:pointer;">Save</button>
            <button onclick="document.getElementById('budget-modal').style.display='none'" style="margin-left:1rem; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="vision-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div style="background:white; width:400px; margin:100px auto; padding:2rem; border-radius:8px;">
            <h2>Add to Vision Board</h2>
            <label style="display:block; margin-top:10px;">Title / Affirmation</label>
            <input type="text" id="vision-title" placeholder="e.g. My Dream Home" style="width:100%; padding:0.5rem;">
            <label style="display:block; margin-top:10px;">Image URL</label>
            <input type="text" id="vision-url" placeholder="https://..." style="width:100%; padding:0.5rem;">
            <label style="display:block; margin-top:10px;">Section</label>
            <select id="vision-section" style="width:100%; padding:0.5rem; margin-bottom:1rem;"></select>
            <button onclick="saveVisionItem()" style="background:var(--accent); color:white; padding:0.5rem 1rem; border:none; cursor:pointer;">Save</button>
            <button onclick="document.getElementById('vision-modal').style.display='none'" style="margin-left:1rem; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="bulk-toolbar" class="bulk-toolbar">
        <span id="bulk-count" style="font-weight:bold; margin-right:5px;">0</span>
        <div class="bulk-divider"></div>
        <button class="bulk-btn" onclick="bulkActionDate()">üìÖ Date</button>
        <button class="bulk-btn" onclick="bulkActionMove()">üìÇ Move</button>
        <div class="bulk-divider"></div>
        <button class="bulk-btn danger" onclick="bulkActionDelete()">üóë Delete</button>
        <button class="bulk-btn" onclick="toggleSelectionMode()" style="margin-left:5px;">‚úï</button>
    </div>

    <div id="date-context-menu" class="context-menu" style="display:none;">
        <div class="menu-option" onclick="applyDatePreset('today')">
            <span>‚≠êÔ∏è Today</span>
        </div>
        <div class="menu-option" onclick="applyDatePreset('tomorrow')">
            <span>‚òÄÔ∏è Tomorrow</span>
        </div>
        <div class="menu-option" onclick="applyDatePreset('next-week')">
            <span>üóìÔ∏è Next Week</span>
        </div>
        <div class="menu-option" onclick="applyDatePreset('custom')">
            <span>‚ãØ Custom...</span>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-option danger" onclick="applyDatePreset('clear')">
            <span>x Remove Date</span>
        </div>
    </div>
    
    <input type="date" id="hidden-date-picker" class="hidden-picker" onchange="applyCustomDate(this.value)">
    
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <script src="app.js"></script>
</body>
</html>
